<?xml version="1.0" encoding="UTF-8"?>
<gmfmap:Mapping xmi:version="2.0"
    xmlns:xmi="http://www.omg.org/XMI"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:ecore="http://www.eclipse.org/emf/2002/Ecore"
    xmlns:gmfmap="http://www.eclipse.org/gmf/2008/mappings"
    xmlns:gmftool="http://www.eclipse.org/gmf/2005/ToolDefinition">
  <nodes>
    <containmentFeature
        href="SimplePDL.ecore#//Process/processElements"/>
    <ownedChild>
      <domainMetaElement
          href="SimplePDL.ecore#//WorkDefinition"/>
      <labelMappings
          xsi:type="gmfmap:FeatureLabelMapping">
        <diagramLabel
            href="SimplePDL.gmfgraph#WorkDefinitionMin_time"/>
        <features
            href="SimplePDL.ecore#//WorkDefinition/name"/>
        <features
            href="SimplePDL.ecore#//WorkDefinition/min_time"/>
        <features
            href="SimplePDL.ecore#//WorkDefinition/max_time"/>
        <editableFeatures
            href="SimplePDL.ecore#//WorkDefinition/name"/>
        <editableFeatures
            href="SimplePDL.ecore#//WorkDefinition/min_time"/>
        <editableFeatures
            href="SimplePDL.ecore#//WorkDefinition/max_time"/>
      </labelMappings>
      <tool
          xsi:type="gmftool:CreationTool"
          href="SimplePDL.gmftool#//@palette/@tools.0/@tools.0"/>
      <diagramNode
          href="SimplePDL.gmfgraph#WorkDefinition"/>
    </ownedChild>
  </nodes>
  <nodes>
    <containmentFeature
        href="SimplePDL.ecore#//Process/resources"/>
    <ownedChild>
      <domainMetaElement
          href="SimplePDL.ecore#//Resource"/>
      <labelMappings
          xsi:type="gmfmap:FeatureLabelMapping">
        <diagramLabel
            href="SimplePDL.gmfgraph#ResourceName"/>
        <features
            href="SimplePDL.ecore#//Resource/name"/>
        <features
            href="SimplePDL.ecore#//Resource/marking"/>
        <editableFeatures
            href="SimplePDL.ecore#//Resource/name"/>
        <editableFeatures
            href="SimplePDL.ecore#//Resource/marking"/>
      </labelMappings>
      <tool
          xsi:type="gmftool:CreationTool"
          href="SimplePDL.gmftool#//@palette/@tools.0/@tools.4"/>
      <diagramNode
          href="SimplePDL.gmfgraph#Resource"/>
    </ownedChild>
  </nodes>
  <nodes>
    <containmentFeature
        href="SimplePDL.ecore#//Process/processElements"/>
    <ownedChild>
      <domainMetaElement
          href="SimplePDL.ecore#//Parameter"/>
      <labelMappings
          xsi:type="gmfmap:FeatureLabelMapping">
        <diagramLabel
            href="SimplePDL.gmfgraph#ParameterNbNeeds"/>
        <features
            href="SimplePDL.ecore#//Parameter/name"/>
        <features
            href="SimplePDL.ecore#//Parameter/nbNeeds"/>
        <editableFeatures
            href="SimplePDL.ecore#//Parameter/name"/>
        <editableFeatures
            href="SimplePDL.ecore#//Parameter/nbNeeds"/>
      </labelMappings>
      <tool
          xsi:type="gmftool:CreationTool"
          href="SimplePDL.gmftool#//@palette/@tools.0/@tools.5"/>
      <diagramNode
          href="SimplePDL.gmfgraph#Parameter"/>
    </ownedChild>
  </nodes>
  <nodes>
    <containmentFeature
        href="SimplePDL.ecore#//Process/processElements"/>
    <ownedChild>
      <domainMetaElement
          href="SimplePDL.ecore#//Guidance"/>
      <labelMappings
          xsi:type="gmfmap:FeatureLabelMapping">
        <diagramLabel
            href="SimplePDL.gmfgraph#GuidanceText"/>
        <features
            href="SimplePDL.ecore#//Guidance/text"/>
        <editableFeatures
            href="SimplePDL.ecore#//Guidance/text"/>
      </labelMappings>
      <tool
          xsi:type="gmftool:CreationTool"
          href="SimplePDL.gmftool#//@palette/@tools.0/@tools.2"/>
      <diagramNode
          href="SimplePDL.gmfgraph#Guidance"/>
    </ownedChild>
  </nodes>
  <links>
    <tool
        xsi:type="gmftool:CreationTool"
        href="SimplePDL.gmftool#//@palette/@tools.0/@tools.3"/>
    <diagramLink
        href="SimplePDL.gmfgraph#GuidanceElement"/>
    <linkMetaFeature
        xsi:type="ecore:EReference"
        href="SimplePDL.ecore#//Guidance/element"/>
    <creationConstraints>
      <targetEnd
          body="self &lt;> oppositeEnd"/>
    </creationConstraints>
  </links>
  <links>
    <tool
        xsi:type="gmftool:CreationTool"
        href="SimplePDL.gmftool#//@palette/@tools.0/@tools.6"/>
    <diagramLink
        href="SimplePDL.gmfgraph#ParameterWorkDefinition"/>
    <linkMetaFeature
        xsi:type="ecore:EReference"
        href="SimplePDL.ecore#//Parameter/workDefinition"/>
    <creationConstraints>
      <targetEnd
          body="self &lt;> oppositeEnd"/>
    </creationConstraints>
  </links>
  <links>
    <domainMetaElement
        href="SimplePDL.ecore#//WorkSequence"/>
    <labelMappings
        xsi:type="gmfmap:FeatureLabelMapping">
      <diagramLabel
          href="SimplePDL.gmfgraph#WorkSequenceLinkType"/>
      <features
          href="SimplePDL.ecore#//WorkSequence/linkType"/>
      <features
          href="SimplePDL.ecore#//WorkSequence/name"/>
      <editableFeatures
          href="SimplePDL.ecore#//WorkSequence/linkType"/>
      <editableFeatures
          href="SimplePDL.ecore#//WorkSequence/name"/>
    </labelMappings>
    <containmentFeature
        href="SimplePDL.ecore#//Process/processElements"/>
    <tool
        xsi:type="gmftool:CreationTool"
        href="SimplePDL.gmftool#//@palette/@tools.0/@tools.1"/>
    <diagramLink
        href="SimplePDL.gmfgraph#WorkSequence"/>
    <sourceMetaFeature
        xsi:type="ecore:EReference"
        href="SimplePDL.ecore#//WorkSequence/predecessor"/>
    <linkMetaFeature
        xsi:type="ecore:EReference"
        href="SimplePDL.ecore#//WorkSequence/successor"/>
    <creationConstraints>
      <targetEnd
          body="self &lt;> oppositeEnd"/>
    </creationConstraints>
  </links>
  <diagram>
    <diagramCanvas
        href="SimplePDL.gmfgraph#simplepdl"/>
    <domainModel
        href="SimplePDL.ecore#/"/>
    <domainMetaElement
        href="SimplePDL.ecore#//Process"/>
    <palette
        href="SimplePDL.gmftool#//@palette"/>
  </diagram>
  <audits
      id="rules"
      name="rules">
    <childContainers
        id="process"
        name="process">
      <audits
          name="nameIsDefined"
          id="processNameIsDefined">
        <rule
            body="self->forAll(e|e.name.size()>0)"/>
        <target
            xsi:type="gmfmap:DomainElementTarget">
          <element
              href="SimplePDL.ecore#//Process"/>
        </target>
      </audits>
      <audits
          name="containmentConsistency"
          id="processContainmentConsistency">
        <rule
            body="let elements : Set(ProcessElement) = self.processElements in&#xA;    let wds: Set(ProcessElement) = elements->select( e | e.oclIsTypeOf(WorkDefinition)) in&#xA;      let wss: Set(ProcessElement) = elements->select( e | e.oclIsTypeOf(WorkSequence)) in&#xA;        -- WS linked to a process WD are elements of this process&#xA;        wds->forAll(wd: ProcessElement |&#xA;            elements->includesAll(wd.oclAsType(WorkDefinition).linksToPredecessors)&#xA;            and elements->includesAll(wd.oclAsType(WorkDefinition).linksToSuccessors))&#xA;        -- source and target of a process WS are elements of this process&#xA;        and wss->forAll(ws: ProcessElement |&#xA;            elements->includes(ws.oclAsType(WorkSequence).predecessor)&#xA;            and elements->includes(ws.oclAsType(WorkSequence).successor))"/>
        <target
            xsi:type="gmfmap:DomainElementTarget">
          <element
              href="SimplePDL.ecore#//Process"/>
        </target>
      </audits>
      <audits
          name="WDparameterConsistency"
          id="processWDparameterConsistency">
        <rule
            body="let elements : Set(ProcessElement) = self.processElements in&#xA;    let wds: Set(ProcessElement) = elements->select( e | e.oclIsTypeOf(WorkDefinition)) in&#xA;      let pars: Set(ProcessElement) = elements->select( e | e.oclIsTypeOf(Parameter)) in&#xA;        -- ParWD linked to a process WD are elements of this process&#xA;        wds->forAll(wd: ProcessElement |&#xA;&#x9;&#x9;&#x9;elements->includesAll(wd.oclAsType(WorkDefinition).needs))&#xA;        and pars->forAll(par: ProcessElement |&#xA;            elements->includes(par.oclAsType(Parameter).workDefinition))"/>
        <target
            xsi:type="gmfmap:DomainElementTarget">
          <element
              href="SimplePDL.ecore#//Process"/>
        </target>
      </audits>
      <audits
          name="parameterResourceConsistency"
          id="processParameterResourceConsistency">
        <rule
            body="let elements : Set(ProcessElement) = self.processElements in&#xA;    let pars: Set(ProcessElement) = elements->select( e | e.oclIsTypeOf(Parameter)) in&#xA;      let res: Set(Resource) = self.resources in&#xA;        -- ParWD linked to a resource Res are elements of this process&#xA;        pars->forAll(par: ProcessElement |&#xA;&#x9;&#x9;&#x9;res->includes(par.oclAsType(Parameter).resource))"/>
        <target
            xsi:type="gmfmap:DomainElementTarget">
          <element
              href="SimplePDL.ecore#//Process"/>
        </target>
      </audits>
      <audits
          name="processElementsDiffName"
          id="processElementsDiffName"
          message="">
        <rule
            body="self.processElements->forAll(e1,e2 | e1&lt;>e2 implies e1.oclAsType(WorkDefinition).name&lt;>e2.oclAsType(WorkDefinition).name)"/>
        <target
            xsi:type="gmfmap:DomainElementTarget">
          <element
              href="SimplePDL.ecore#//Process"/>
        </target>
      </audits>
      <audits
          name="parameterDiffName"
          id="processParameterDiffName">
        <rule
            body="self.processElements->forAll(e1,e2 | e1&lt;>e2 implies e1.oclAsType(Parameter).name&lt;>e2.oclAsType(Parameter).name)"/>
        <target
            xsi:type="gmfmap:DomainElementTarget">
          <element
              href="SimplePDL.ecore#//Process"/>
        </target>
      </audits>
      <audits
          name="min_timeMax_timeAreDefined"
          id="processMin_timeMax_timeAreDefined">
        <rule
            body="if  self.min_time.oclIsUndefined() or self.max_time.oclIsUndefined() then&#xA;&#x9;false&#xA;    else&#xA;&#x9;self.min_time >= 0 and (self.max_time >= self.min_time or self.max_time = -1)&#xA;    endif"/>
        <target
            xsi:type="gmfmap:DomainElementTarget">
          <element
              href="SimplePDL.ecore#//Process"/>
        </target>
      </audits>
      <audits
          name="resourcesDiffName"
          id="processResourcesDiffName">
        <rule
            body="self.resources->forAll(r1,r2 | r1&lt;>r2 implies r1.oclAsType(Resource).name&lt;>r2.oclAsType(Resource).name)"/>
        <target
            xsi:type="gmfmap:DomainElementTarget">
          <element
              href="SimplePDL.ecore#//Process"/>
        </target>
      </audits>
      <audits
          name="globalMax_time"
          id="processGlobalMax_time">
        <rule
            body="self.processElements->forAll(e | (e.oclAsType(WorkDefinition).max_time &lt;= self.max_time or self.max_time = -1))"/>
        <target
            xsi:type="gmfmap:DomainElementTarget">
          <element
              href="SimplePDL.ecore#//Process"/>
        </target>
      </audits>
    </childContainers>
    <childContainers
        id="workSequence"
        name="workSequence">
      <audits
          name="notReflexive"
          id="workSequenceNotReflexive">
        <rule
            body="self.predecessor&lt;>self.successor"/>
        <target
            xsi:type="gmfmap:DomainElementTarget">
          <element
              href="SimplePDL.ecore#//WorkSequence"/>
        </target>
      </audits>
    </childContainers>
    <childContainers
        id="workDefinition"
        name="workDefinition"
        description="">
      <audits
          name="nameIsDefined"
          id="workDefinitionNameIsDefined">
        <rule
            body="if  self.name.oclIsUndefined() then&#xA;&#x9;false&#xA;    else&#xA;&#x9;self.name &lt;> ''&#xA;    endif"/>
        <target
            xsi:type="gmfmap:DomainElementTarget">
          <element
              href="SimplePDL.ecore#//WorkDefinition"/>
        </target>
      </audits>
      <audits
          name="min_timeMax_timeAreDefined"
          id="workDefinitionMin_timeMax_timeAreDefined">
        <rule
            body="if  self.min_time.oclIsUndefined() or self.max_time.oclIsUndefined() then&#xA;&#x9;false&#xA;    else&#xA;&#x9;self.min_time >= 0 and (self.max_time >= self.min_time or self.max_time = -1)&#xA;    endif"/>
        <target
            xsi:type="gmfmap:DomainElementTarget">
          <element
              href="SimplePDL.ecore#//WorkDefinition"/>
        </target>
      </audits>
      <audits
          name="parameterDiffResource"
          id="workDefinitionParameterDiffResource"
          message="">
        <rule
            body="self.needs->forAll(p1,p2 | p1&lt;>p2 implies p1.resource.oclAsType(Resource).name&lt;>p2.resource.oclAsType(Resource).name)"/>
        <target
            xsi:type="gmfmap:DomainElementTarget">
          <element
              href="SimplePDL.ecore#//WorkDefinition"/>
        </target>
      </audits>
    </childContainers>
    <childContainers
        id="resource"
        name="resource">
      <audits
          name="nameIsDefined"
          id="resourceNameIsDefined">
        <rule
            body="if  self.name.oclIsUndefined() then&#xA;&#x9;false&#xA;    else&#xA;&#x9;self.name &lt;> ''&#xA;    endif"/>
        <target
            xsi:type="gmfmap:DomainElementTarget">
          <element
              href="SimplePDL.ecore#//Resource"/>
        </target>
      </audits>
      <audits
          name="markingIsDefined"
          id="resourceMarkingIsDefined">
        <rule
            body="if  self.marking.oclIsUndefined() then&#xA;&#x9;false&#xA;    else&#xA;&#x9;self.marking >= 0&#xA;    endif"/>
        <target
            xsi:type="gmfmap:DomainElementTarget">
          <element
              href="SimplePDL.ecore#//Resource"/>
        </target>
      </audits>
    </childContainers>
    <childContainers
        id="parameter"
        name="parameter">
      <audits
          name="nameIsDefined"
          id="parameterNameIsDefined">
        <rule
            body="if  self.name.oclIsUndefined() then&#xA;&#x9;false&#xA;    else&#xA;&#x9;self.name &lt;> '' and self.name = self.resource.oclAsType(Resource).name&#xA;    endif"/>
        <target
            xsi:type="gmfmap:DomainElementTarget">
          <element
              href="SimplePDL.ecore#//Parameter"/>
        </target>
      </audits>
      <audits
          name="nbNeedsIsDefined"
          id="parameterNbNeedsIsDefined">
        <rule
            body="    if  self.nbNeeds.oclIsUndefined() then&#xA;&#x9;false&#xA;    else&#xA;&#x9;self.nbNeeds >= 0 and self.nbNeeds &lt;= self.resource.oclAsType(Resource).marking&#xA;    endif"/>
        <target
            xsi:type="gmfmap:DomainElementTarget">
          <element
              href="SimplePDL.ecore#//Parameter"/>
        </target>
      </audits>
    </childContainers>
  </audits>
</gmfmap:Mapping>
